<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Playlick</title>
        <link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="/playlick.css">
        <link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="/lib/jquery-autocomplete/jquery.autocomplete.css">
    </head>
    <body>
        <div id="viewport">
            <div id="content">
                <div id="sidebar">
                    <h1>Your playlists</h1>
                    <div class="stash">
                        <ul id="playlist_stash">
                            <li class="current"><a href="#" id="create_playlist" class="playlist">+ Create</a></li>
                            <li><a href="#" id="import_playlist" class="playlist">
                                <img src="http://cdn.last.fm/flatness/favicon.2.png" width="16" height="16">
                                Import
                            </a></li>
                        </ul>
                        <p id="loading_playlists">Loading…</p>
                    </div>
                    <div id="playdar">
                    </div>
                </div>
                
                <div id="main">
                    <div id="manage">
                        <h1 id="playlistTitle">Create a new playlist</h1>
                        
                        <form id="add_to_playlist">
                            <label for="add_track_input">Add a Track:</label>
                            <input type="text" name="track" id="add_track_input" />
                            <input type="hidden" name="artist_name" id="add_track_artist" />
                            <input type="hidden" name="track_name" id="add_track_name" />
                            <input type="submit" id="add_track_button" value="Start a Playlist" />
                        </form>
                        
                        <ol class="trackList" id="playlist"></ol>
                    </div>
                    
                    <div id="import">
                        <h1>Import a playlist from Last.fm</h1>
                        
                        <form id="import_playlist_form">
                            <label for="import_playlist_input">Username:</label>
                            <input type="text" name="username" id="import_playlist_input" />
                            <input type="submit" id="import_playlist_button" value="Get Playlists" />
                        </form>
                        
                        <p class="import_messages" id="import_loading"><img src="/track_scanning.gif" width="16" height="16"> Loading playlists…</p>
                        <p class="import_messages" id="import_done">Done! Imported <span id="import_count"></span> playlists</p>
                        <p class="import_messages" id="import_error_user">Invalid user</p>
                        <p class="import_messages" id="import_error_no_playlists">No playlists found</p>
                    </div>
                </div>
                
                <div id="footer">
                    <a href="http://github.com/jwheare/playlick/tree/master">Playlick on github</a> |
                    Made by <a href="http://james.wheare.org/">James Wheare</a> |
                    Work in Progress. Mostly a UI concept for now.
                </div>
            </div>
        </div>
        
        <!-- jQuery -->
        <script src="/lib/jquery.js"></script>
        <script src="/lib/jquery-ui.js"></script>
        <script src="/lib/jquery-autocomplete/jquery.autocomplete.js"></script>
        
        <!-- Core -->
        <script src="/util.js"></script>
        <script src="/models.js"></script>
        
        <!-- Playdar -->
        <script src="/lib/playdar_compressed.js"></script>
        
        <!-- Data/App -->
        <script src="/data.js"></script>
        <script src="/main.js"></script>
        
        <!-- Sound Manager 2 -->
        <script src="/lib/soundmanager2-nodebug-jsmin.js"></script>
        <script>
            Playdar.setup({
                name: "Playlick",
                website: "http://www.playlick.com/",
                receiverurl: "http://www.playlick.com/playdar_auth.html"
            });
            Playdar.USE_STATUS_BAR = false;
            // Playdar.REFRESH_INTERVAL = 1000;
            Playdar.MAX_CONCURRENT_RESOLUTIONS = 20;
            Playdar.client.register_listeners({
                onStat: function (detected) {
                    if (!detected.authenticated) {
                        PLAYLICK.update_playdar_status(Playdar.client.get_auth_link_html('Connect to Playdar'));
                    }
                },
                onAuth: function () {
                    PLAYLICK.update_playdar_status(Playdar.client.get_disconnect_link_html('Disconnect from Playdar'));
                    PLAYLICK.resolve_current_playlist();
                },
                onAuthClear: function () {
                    PLAYLICK.update_playdar_status(Playdar.client.get_auth_link_html('Connect to Playdar'));
                    PLAYLICK.cancel_resolve();
                }
            });
            
            soundManager.url = '/lib/soundmanager2_flash9.swf';
            soundManager.flashVersion = 9;
            soundManager.onload = function () {
                Playdar.setup_player(soundManager);
                Playdar.client.init();
            };
        </script>
    </body>
</html>
